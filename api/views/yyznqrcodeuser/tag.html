<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>请选择您对应的标签</title>
	{{ assets.outputCss() }}
	<style type="text/css">
	.tag-box {
		display: block;
		padding-top: 15px;
		height: 420px;
		overflow: auto;
	}

	.tag-box li {
		margin: 0 5px 10px;
		width: auto;
		display: inline-block;
		border-radius: 6px;
		background-color: #5cb85c;
		opacity: .7;
	}

	.tag-box li a {
		color: #fff;
		text-decoration: none;
	}

	.tag-box li.active {
		border-radius: 6px;
		opacity: 1;
		color: #fff;
		background-color: #5cb85c !important;
		border-color: #4cae4c !important;
	}

	.footer-box {
		position: fixed;
		left: 0;
		bottom: 0;
		right: 0;
		text-align: center;
	}

	.footer-box .btn-long {
		margin-bottom: 20px;
		padding: 8px 14px;
		font-size: 16px;
		width: 300px;
	}

	.footer-box {
		text-align: center;
		font-size: 14px;
		color: #999;
	}
	</style>
</head>

<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12">
				<ul class="list-group tag-box">
					{% for key,value in taglist %}
					<li class="list-group-item">
						<a href="{{ value['url'] }}">{{ value['name'] }}</a>
					</li>
					{% endfor %}
				</ul>
			</div>
		</div>
		<div class="footer-box">
			<p class="footer">运营指南提供技术支持</p>
		</div>
	</div>
</body>
{{ assets.outputJs() }}
<script type="text/javascript">
getWeChatSign();

function getWeChatSign() {
	var wxid = "{{ wx_id }}";
	$.ajax({
		url: "/new/yyzn/getSignPackage",
		type: 'post',
		data: { wx_id: wxid },
		success: function(res) {
			console.log(res);
			if (res.code == 200) {
				var resData = res.data;
				wx.config({
					debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
					appId: resData.appId, // 必填，公众号的唯一标识
					timestamp: resData.timestamp, // 必填，生成签名的时间戳
					nonceStr: resData.nonceStr, // 必填，生成签名的随机串
					signature: resData.signature, // 必填，签名
					jsApiList: ["onMenuShareTimeline", // 分享给好友
						"onMenuShareAppMessage", // 分享到朋友圈
						"onMenuShareAppMessage", // 分享到朋友圈
						"hideMenuItems",
					] // 必填，需要使用的JS接口列表
				});
			}
		},
		error: function(data) {
			console.log(JSON.stringify(data));
		}
	});

	wx.ready(function() {
		wx.hideMenuItems({
			menuList: ["menuItem:copyUrl", "menuItem:editTag", "menuItem:delete", "menuItem:originPage", "menuItem:readMode", "menuItem:openWithQQBrowser", "menuItem:openWithSafari", "menuItem:share:email", "menuItem:share:brand", "menuItem:share:qq", "menuItem:share:QZone"] // 要隐藏的菜单项，只能隐藏“传播类”和“保护类”按钮
		});
		wx.onMenuShareTimeline({
			title: "{{ share['title'] }}",
			link: "{{ share['link'] }}",
			imgUrl: "{{ share['image']}}",
			success: function() {}
		});
		wx.onMenuShareAppMessage({
			title: "{{ share['title'] }}",
			desc: "{{ share['description']}}", // 这里请特别注意是要去除html
			link: "{{ share['link'] }}",
			imgUrl: "{{ share['image']}}",
			type: '',
			success: function() {}
		});
	});
}
</script>

</html>